import { Component, Input, Output, EventEmitter, ContentChild, ChangeDetectionStrategy, forwardRef } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';
import { ActiveRating, FractionRating, InactiveRating } from './custom-rating';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "./bar-rating.pipe";
/** This allows support [(ngModel)] and ngControl. */
const RATING_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => BarRating),
    multi: true
};
/** This allows control required validation. */
const RATING_VALUE_VALIDATOR = {
    provide: NG_VALIDATORS,
    useExisting: forwardRef(() => BarRating),
    multi: true,
};
var BarRatingUnitState;
(function (BarRatingUnitState) {
    BarRatingUnitState["active"] = "active";
    BarRatingUnitState["inactive"] = "inactive";
    BarRatingUnitState["selected"] = "selected";
    BarRatingUnitState["fraction"] = "fraction";
})(BarRatingUnitState || (BarRatingUnitState = {}));
export class BarRating {
    constructor(changeDetectorRef) {
        this.changeDetectorRef = changeDetectorRef;
        this.unitState = BarRatingUnitState;
        this.contexts = [];
        /** Maximal rating that can be given using this widget. */
        this.max = 5;
        /** A flag indicating if rating can be updated. */
        this.readOnly = false;
        /** Set the theme */
        this.theme = 'default';
        /** Show rating title */
        this.showText = false;
        /** Replace rate value with a title */
        this.titles = [];
        /** A flag indicating if rating is required for form validation. */
        this.required = false;
        /**
         * A stream that emits when a user is hovering over a given rating.
         * Event's payload equals to the rating being hovered over.
         */
        this.hover = new EventEmitter();
        /**
         * A stream that emits when a user stops hovering over a given rating.
         * Event's payload equals to the rating of the last item being hovered over.
         */
        this.leave = new EventEmitter();
        /**
         * A stream that emits when a user selects a new rating.
         * Event's payload equals to the newly selected rating.
         */
        this.rateChange = new EventEmitter(true);
        /**
         * A stream that forwards a bar rating click since clicks are not propagated
         */
        this.barClick = new EventEmitter();
    }
    ngOnChanges(changes) {
        if (changes.rate) {
            this.update(this.rate);
        }
    }
    ngOnInit() {
        this.contexts = Array.from({ length: this.max }, (context, i) => ({
            state: BarRatingUnitState.inactive,
            click: () => this.handleClick(i + 1),
            enter: () => this.handleEnter(i + 1)
        }));
        this.updateState(this.rate);
    }
    update(newRate, internalChange = true) {
        if (!this.readOnly && !this.disabled && this.rate !== newRate) {
            this.rate = newRate;
            this.rateChange.emit(this.rate);
        }
        if (internalChange) {
            this.onChange(this.rate);
            this.onTouched();
        }
        this.updateState(this.rate);
    }
    /** Reset rate value */
    reset() {
        this.leave.emit(this.nextRate);
        this.updateState(this.rate);
    }
    updateState(nextValue) {
        /** Set rate value as text */
        this.nextRate = nextValue - 1;
        /** Set the rating */
        this.contexts = Array.from({ length: this.max }, (context, index) => ({
            state: index + 1 <= nextValue
                ? BarRatingUnitState.selected
                : (index + 1 === Math.round(nextValue) && nextValue % 1) >= 0.5
                    ? BarRatingUnitState.fraction
                    : BarRatingUnitState.inactive,
            click: () => this.handleClick(index),
            enter: () => this.handleEnter(index)
        }));
    }
    handleClick(value) {
        this.update(value + 1);
    }
    handleEnter(index) {
        if (!this.disabled && !this.readOnly) {
            /** Add selected class for rating hover */
            this.contexts.map((context, i) => {
                context.state = i <= index ? BarRatingUnitState.active : BarRatingUnitState.inactive;
            });
            this.nextRate = index;
            this.hover.emit(index);
        }
    }
    /** This is the initial value set to the component */
    writeValue(value) {
        this.update(value, false);
        this.changeDetectorRef.markForCheck();
    }
    validate(c) {
        return (this.required && !c.value) ? { required: true } : null;
    }
    onChange(_) {
    }
    onTouched() {
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: BarRating, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.0.2", type: BarRating, selector: "bar-rating", inputs: { rate: "rate", max: "max", readOnly: "readOnly", theme: "theme", showText: "showText", titles: "titles", required: "required" }, outputs: { hover: "hover", leave: "leave", rateChange: "rateChange", barClick: "barClick" }, providers: [RATING_VALUE_ACCESSOR, RATING_VALUE_VALIDATOR], queries: [{ propertyName: "customActiveRating", first: true, predicate: ActiveRating, descendants: true }, { propertyName: "customInActiveRating", first: true, predicate: InactiveRating, descendants: true }, { propertyName: "customFractionRating", first: true, predicate: FractionRating, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"br br-{{ customInActiveRating ? '' : theme }}\"\r\n     [class.br-readonly]=\"readOnly\"\r\n     [class.br-disabled]=\"disabled\">\r\n\r\n  <div class=\"br-units\" (mouseleave)=\"reset()\">\r\n\r\n    <div *ngFor=\"let unit of contexts\"\r\n         class=\"br-unit\"\r\n         (click)=\"unit.click($event)\"\r\n         (mouseenter)=\"unit.enter()\">\r\n\r\n      <ng-container [ngSwitch]=\"unit.state\">\r\n        <ng-template *ngSwitchCase=\"unitState.fraction\" [ngTemplateOutlet]=\"customFractionRating?.template || fractionTemplate\"></ng-template>\r\n        <ng-template *ngSwitchCase=\"unitState.inactive\" [ngTemplateOutlet]=\"customInActiveRating?.template || inactiveTemplate\"></ng-template>\r\n        <ng-template *ngSwitchDefault [ngTemplateOutlet]=\"customActiveRating?.template || activeTemplate\"></ng-template>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"showText\" class=\"br-text\">{{ nextRate + 1 | rateTitle: titles }}</div>\r\n</div>\r\n\r\n<ng-template #fractionTemplate>\r\n  <div class=\"br-unit-inner br-fraction\"></div>\r\n</ng-template>\r\n\r\n<ng-template #activeTemplate>\r\n  <div class=\"br-unit-inner br-active\"></div>\r\n</ng-template>\r\n\r\n<ng-template #inactiveTemplate>\r\n  <div class=\"br-unit-inner br-inactive\"></div>\r\n</ng-template>\r\n", styles: ["*{box-sizing:border-box}:host{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br{position:relative}.br-units{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner{position:relative}.br-readonly .br-unit,.br-disabled .br-unit{cursor:default}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: i1.NgSwitchDefault, selector: "[ngSwitchDefault]" }, { kind: "pipe", type: i2.BarRatingPipe, name: "rateTitle" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: BarRating, decorators: [{
            type: Component,
            args: [{ selector: 'bar-rating', providers: [RATING_VALUE_ACCESSOR, RATING_VALUE_VALIDATOR], changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"br br-{{ customInActiveRating ? '' : theme }}\"\r\n     [class.br-readonly]=\"readOnly\"\r\n     [class.br-disabled]=\"disabled\">\r\n\r\n  <div class=\"br-units\" (mouseleave)=\"reset()\">\r\n\r\n    <div *ngFor=\"let unit of contexts\"\r\n         class=\"br-unit\"\r\n         (click)=\"unit.click($event)\"\r\n         (mouseenter)=\"unit.enter()\">\r\n\r\n      <ng-container [ngSwitch]=\"unit.state\">\r\n        <ng-template *ngSwitchCase=\"unitState.fraction\" [ngTemplateOutlet]=\"customFractionRating?.template || fractionTemplate\"></ng-template>\r\n        <ng-template *ngSwitchCase=\"unitState.inactive\" [ngTemplateOutlet]=\"customInActiveRating?.template || inactiveTemplate\"></ng-template>\r\n        <ng-template *ngSwitchDefault [ngTemplateOutlet]=\"customActiveRating?.template || activeTemplate\"></ng-template>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"showText\" class=\"br-text\">{{ nextRate + 1 | rateTitle: titles }}</div>\r\n</div>\r\n\r\n<ng-template #fractionTemplate>\r\n  <div class=\"br-unit-inner br-fraction\"></div>\r\n</ng-template>\r\n\r\n<ng-template #activeTemplate>\r\n  <div class=\"br-unit-inner br-active\"></div>\r\n</ng-template>\r\n\r\n<ng-template #inactiveTemplate>\r\n  <div class=\"br-unit-inner br-inactive\"></div>\r\n</ng-template>\r\n", styles: ["*{box-sizing:border-box}:host{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br{position:relative}.br-units{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner{position:relative}.br-readonly .br-unit,.br-disabled .br-unit{cursor:default}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { rate: [{
                type: Input
            }], max: [{
                type: Input
            }], readOnly: [{
                type: Input
            }], theme: [{
                type: Input
            }], showText: [{
                type: Input
            }], titles: [{
                type: Input
            }], required: [{
                type: Input
            }], hover: [{
                type: Output
            }], leave: [{
                type: Output
            }], rateChange: [{
                type: Output
            }], barClick: [{
                type: Output
            }], customActiveRating: [{
                type: ContentChild,
                args: [ActiveRating]
            }], customInActiveRating: [{
                type: ContentChild,
                args: [InactiveRating]
            }], customFractionRating: [{
                type: ContentChild,
                args: [FractionRating]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFyLXJhdGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1iYXItcmF0aW5nL3NyYy9saWIvYmFyLXJhdGluZy50cyIsIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1iYXItcmF0aW5nL3NyYy9saWIvYmFyLXJhdGluZy5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixZQUFZLEVBSVosWUFBWSxFQUVaLHVCQUF1QixFQUN2QixVQUFVLEVBQ1gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFtQyxhQUFhLEVBQUUsaUJBQWlCLEVBQXNCLE1BQU0sZ0JBQWdCLENBQUM7QUFDdkgsT0FBTyxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7QUFFL0UscURBQXFEO0FBQ3JELE1BQU0scUJBQXFCLEdBQUc7SUFDNUIsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztJQUN4QyxLQUFLLEVBQUUsSUFBSTtDQUNaLENBQUM7QUFFRiwrQ0FBK0M7QUFDL0MsTUFBTSxzQkFBc0IsR0FBRztJQUM3QixPQUFPLEVBQUUsYUFBYTtJQUN0QixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztJQUN4QyxLQUFLLEVBQUUsSUFBSTtDQUNaLENBQUM7QUFFRixJQUFLLGtCQUtKO0FBTEQsV0FBSyxrQkFBa0I7SUFDckIsdUNBQWlCLENBQUE7SUFDakIsMkNBQXFCLENBQUE7SUFDckIsMkNBQXFCLENBQUE7SUFDckIsMkNBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUxJLGtCQUFrQixLQUFsQixrQkFBa0IsUUFLdEI7QUFlRCxNQUFNLE9BQU8sU0FBUztJQXVEcEIsWUFBb0IsaUJBQW9D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S0FBSztnQkFNSSxLQUFLO3NCQUFkLE1BQU07Z0JBTUcsS0FBSztzQkFBZCxNQUFNO2dCQU1HLFVBQVU7c0JBQW5CLE1BQU07Z0JBS0csUUFBUTtzQkFBakIsTUFBTTtnQkFFcUIsa0JBQWtCO3NCQUE3QyxZQUFZO3VCQUFDLFlBQVk7Z0JBQ0ksb0JBQW9CO3NCQUFqRCxZQUFZO3VCQUFDLGNBQWM7Z0JBQ0Usb0JBQW9CO3NCQUFqRCxZQUFZO3VCQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBJbnB1dCxcclxuICBPdXRwdXQsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIE9uSW5pdCxcclxuICBPbkNoYW5nZXMsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgZm9yd2FyZFJlZlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgVmFsaWRhdG9yLCBOR19WQUxJREFUT1JTLCBOR19WQUxVRV9BQ0NFU1NPUiwgVW50eXBlZEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBBY3RpdmVSYXRpbmcsIEZyYWN0aW9uUmF0aW5nLCBJbmFjdGl2ZVJhdGluZyB9IGZyb20gJy4vY3VzdG9tLXJhdGluZyc7XHJcblxyXG4vKiogVGhpcyBhbGxvd3Mgc3VwcG9ydCBbKG5nTW9kZWwpXSBhbmQgbmdDb250cm9sLiAqL1xyXG5jb25zdCBSQVRJTkdfVkFMVUVfQUNDRVNTT1IgPSB7XHJcbiAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQmFyUmF0aW5nKSxcclxuICBtdWx0aTogdHJ1ZVxyXG59O1xyXG5cclxuLyoqIFRoaXMgYWxsb3dzIGNvbnRyb2wgcmVxdWlyZWQgdmFsaWRhdGlvbi4gKi9cclxuY29uc3QgUkFUSU5HX1ZBTFVFX1ZBTElEQVRPUiA9IHtcclxuICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxyXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEJhclJhdGluZyksXHJcbiAgbXVsdGk6IHRydWUsXHJcbn07XHJcblxyXG5lbnVtIEJhclJhdGluZ1VuaXRTdGF0ZSB7XHJcbiAgYWN0aXZlID0gJ2FjdGl2ZScsXHJcbiAgaW5hY3RpdmUgPSAnaW5hY3RpdmUnLFxyXG4gIHNlbGVjdGVkID0gJ3NlbGVjdGVkJyxcclxuICBmcmFjdGlvbiA9ICdmcmFjdGlvbidcclxufVxyXG5cclxuaW50ZXJmYWNlIEJhclJhdGluZ0NvbnRleHQge1xyXG4gIHN0YXRlOiBCYXJSYXRpbmdVbml0U3RhdGU7XHJcbiAgY2xpY2s6IChlKSA9PiB2b2lkO1xyXG4gIGVudGVyOiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Jhci1yYXRpbmcnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9iYXItcmF0aW5nLmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2Jhci1yYXRpbmcuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1JBVElOR19WQUxVRV9BQ0NFU1NPUiwgUkFUSU5HX1ZBTFVFX1ZBTElEQVRPUl0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIEJhclJhdGluZyBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBDb250cm9sVmFsdWVBY2Nlc3NvciwgVmFsaWRhdG9yIHtcclxuXHJcbiAgcmVhZG9ubHkgdW5pdFN0YXRlID0gQmFyUmF0aW5nVW5pdFN0YXRlO1xyXG4gIGNvbnRleHRzOiBCYXJSYXRpbmdDb250ZXh0W10gPSBbXTtcclxuICBuZXh0UmF0ZTogbnVtYmVyO1xyXG4gIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAvKiogQ3VycmVudCByYXRpbmcuIENhbiBiZSBhIGRlY2ltYWwgdmFsdWUgbGlrZSAzLjE0ICovXHJcbiAgQElucHV0KCkgcmF0ZTtcclxuXHJcbiAgLyoqIE1heGltYWwgcmF0aW5nIHRoYXQgY2FuIGJlIGdpdmVuIHVzaW5nIHRoaXMgd2lkZ2V0LiAqL1xyXG4gIEBJbnB1dCgpIG1heCA9IDU7XHJcblxyXG4gIC8qKiBBIGZsYWcgaW5kaWNhdGluZyBpZiByYXRpbmcgY2FuIGJlIHVwZGF0ZWQuICovXHJcbiAgQElucHV0KCkgcmVhZE9ubHkgPSBmYWxzZTtcclxuXHJcbiAgLyoqIFNldCB0aGUgdGhlbWUgKi9cclxuICBASW5wdXQoKSB0aGVtZSA9ICdkZWZhdWx0JztcclxuXHJcbiAgLyoqIFNob3cgcmF0aW5nIHRpdGxlICovXHJcbiAgQElucHV0KCkgc2hvd1RleHQgPSBmYWxzZTtcclxuXHJcbiAgLyoqIFJlcGxhY2UgcmF0ZSB2YWx1ZSB3aXRoIGEgdGl0bGUgKi9cclxuICBASW5wdXQoKSB0aXRsZXMgPSBbXTtcclxuXHJcbiAgLyoqIEEgZmxhZyBpbmRpY2F0aW5nIGlmIHJhdGluZyBpcyByZXF1aXJlZCBmb3IgZm9ybSB2YWxpZGF0aW9uLiAqL1xyXG4gIEBJbnB1dCgpIHJlcXVpcmVkID0gZmFsc2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgc3RyZWFtIHRoYXQgZW1pdHMgd2hlbiBhIHVzZXIgaXMgaG92ZXJpbmcgb3ZlciBhIGdpdmVuIHJhdGluZy5cclxuICAgKiBFdmVudCdzIHBheWxvYWQgZXF1YWxzIHRvIHRoZSByYXRpbmcgYmVpbmcgaG92ZXJlZCBvdmVyLlxyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSBob3ZlciA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG5cclxuICAvKipcclxuICAgKiBBIHN0cmVhbSB0aGF0IGVtaXRzIHdoZW4gYSB1c2VyIHN0b3BzIGhvdmVyaW5nIG92ZXIgYSBnaXZlbiByYXRpbmcuXHJcbiAgICogRXZlbnQncyBwYXlsb2FkIGVxdWFscyB0byB0aGUgcmF0aW5nIG9mIHRoZSBsYXN0IGl0ZW0gYmVpbmcgaG92ZXJlZCBvdmVyLlxyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSBsZWF2ZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG5cclxuICAvKipcclxuICAgKiBBIHN0cmVhbSB0aGF0IGVtaXRzIHdoZW4gYSB1c2VyIHNlbGVjdHMgYSBuZXcgcmF0aW5nLlxyXG4gICAqIEV2ZW50J3MgcGF5bG9hZCBlcXVhbHMgdG8gdGhlIG5ld2x5IHNlbGVjdGVkIHJhdGluZy5cclxuICAgKi9cclxuICBAT3V0cHV0KCkgcmF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPih0cnVlKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQSBzdHJlYW0gdGhhdCBmb3J3YXJkcyBhIGJhciByYXRpbmcgY2xpY2sgc2luY2UgY2xpY2tzIGFyZSBub3QgcHJvcGFnYXRlZFxyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSBiYXJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG5cclxuICBAQ29udGVudENoaWxkKEFjdGl2ZVJhdGluZykgY3VzdG9tQWN0aXZlUmF0aW5nOiBBY3RpdmVSYXRpbmc7XHJcbiAgQENvbnRlbnRDaGlsZChJbmFjdGl2ZVJhdGluZykgY3VzdG9tSW5BY3RpdmVSYXRpbmc6IEluYWN0aXZlUmF0aW5nO1xyXG4gIEBDb250ZW50Q2hpbGQoRnJhY3Rpb25SYXRpbmcpIGN1c3RvbUZyYWN0aW9uUmF0aW5nOiBGcmFjdGlvblJhdGluZztcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGlmIChjaGFuZ2VzLnJhdGUpIHtcclxuICAgICAgdGhpcy51cGRhdGUodGhpcy5yYXRlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb250ZXh0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMubWF4IH0sIChjb250ZXh0OiBCYXJSYXRpbmdDb250ZXh0W10sIGk6IG51bWJlcikgPT4gKHtcclxuICAgICAgc3RhdGU6IEJhclJhdGluZ1VuaXRTdGF0ZS5pbmFjdGl2ZSxcclxuICAgICAgY2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soaSArIDEpLFxyXG4gICAgICBlbnRlcjogKCkgPT4gdGhpcy5oYW5kbGVFbnRlcihpICsgMSlcclxuICAgIH0pKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKHRoaXMucmF0ZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUobmV3UmF0ZTogbnVtYmVyLCBpbnRlcm5hbENoYW5nZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5yZWFkT25seSAmJiAhdGhpcy5kaXNhYmxlZCAmJiB0aGlzLnJhdGUgIT09IG5ld1JhdGUpIHtcclxuICAgICAgdGhpcy5yYXRlID0gbmV3UmF0ZTtcclxuICAgICAgdGhpcy5yYXRlQ2hhbmdlLmVtaXQodGhpcy5yYXRlKTtcclxuICAgIH1cclxuICAgIGlmIChpbnRlcm5hbENoYW5nZSkge1xyXG4gICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMucmF0ZSk7XHJcbiAgICAgIHRoaXMub25Ub3VjaGVkKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKHRoaXMucmF0ZSk7XHJcbiAgfVxyXG5cclxuICAvKiogUmVzZXQgcmF0ZSB2YWx1ZSAqL1xyXG4gIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5sZWF2ZS5lbWl0KHRoaXMubmV4dFJhdGUpO1xyXG4gICAgdGhpcy51cGRhdGVTdGF0ZSh0aGlzLnJhdGUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZShuZXh0VmFsdWUpOiB2b2lkIHtcclxuICAgIC8qKiBTZXQgcmF0ZSB2YWx1ZSBhcyB0ZXh0ICovXHJcbiAgICB0aGlzLm5leHRSYXRlID0gbmV4dFZhbHVlIC0gMTtcclxuICAgIC8qKiBTZXQgdGhlIHJhdGluZyAqL1xyXG4gICAgdGhpcy5jb250ZXh0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMubWF4IH0sIChjb250ZXh0OiBCYXJSYXRpbmdDb250ZXh0W10sIGluZGV4OiBudW1iZXIpID0+ICh7XHJcbiAgICAgIHN0YXRlOiBpbmRleCArIDEgPD0gbmV4dFZhbHVlXHJcbiAgICAgICAgPyBCYXJSYXRpbmdVbml0U3RhdGUuc2VsZWN0ZWRcclxuICAgICAgICA6IChpbmRleCArIDEgPT09IE1hdGgucm91bmQobmV4dFZhbHVlKSAmJiBuZXh0VmFsdWUgJSAxKSA+PSAwLjVcclxuICAgICAgICAgID8gQmFyUmF0aW5nVW5pdFN0YXRlLmZyYWN0aW9uXHJcbiAgICAgICAgICA6IEJhclJhdGluZ1VuaXRTdGF0ZS5pbmFjdGl2ZSxcclxuICAgICAgY2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soaW5kZXgpLFxyXG4gICAgICBlbnRlcjogKCkgPT4gdGhpcy5oYW5kbGVFbnRlcihpbmRleClcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2sodmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy51cGRhdGUodmFsdWUgKyAxKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlRW50ZXIoaW5kZXgpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy5yZWFkT25seSkge1xyXG4gICAgICAvKiogQWRkIHNlbGVjdGVkIGNsYXNzIGZvciByYXRpbmcgaG92ZXIgKi9cclxuICAgICAgdGhpcy5jb250ZXh0cy5tYXAoKGNvbnRleHQ6IEJhclJhdGluZ0NvbnRleHQsIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnRleHQuc3RhdGUgPSBpIDw9IGluZGV4ID8gQmFyUmF0aW5nVW5pdFN0YXRlLmFjdGl2ZSA6IEJhclJhdGluZ1VuaXRTdGF0ZS5pbmFjdGl2ZTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubmV4dFJhdGUgPSBpbmRleDtcclxuICAgICAgdGhpcy5ob3Zlci5lbWl0KGluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBUaGlzIGlzIHRoZSBpbml0aWFsIHZhbHVlIHNldCB0byB0aGUgY29tcG9uZW50ICovXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZSh2YWx1ZSwgZmFsc2UpO1xyXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIHZhbGlkYXRlKGM6IFVudHlwZWRGb3JtQ29udHJvbCk6IHsgcmVxdWlyZWQ6IGJvb2xlYW4gfSB8IG51bGwge1xyXG4gICAgcmV0dXJuICh0aGlzLnJlcXVpcmVkICYmICFjLnZhbHVlKSA/IHsgcmVxdWlyZWQ6IHRydWUgfSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZShfOiBhbnkpOiB2b2lkIHtcclxuICB9XHJcblxyXG4gIG9uVG91Y2hlZCgpOiB2b2lkIHtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICh2YWx1ZTogYW55KSA9PiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiPGRpdiBjbGFzcz1cImJyIGJyLXt7IGN1c3RvbUluQWN0aXZlUmF0aW5nID8gJycgOiB0aGVtZSB9fVwiXHJcbiAgICAgW2NsYXNzLmJyLXJlYWRvbmx5XT1cInJlYWRPbmx5XCJcclxuICAgICBbY2xhc3MuYnItZGlzYWJsZWRdPVwiZGlzYWJsZWRcIj5cclxuXHJcbiAgPGRpdiBjbGFzcz1cImJyLXVuaXRzXCIgKG1vdXNlbGVhdmUpPVwicmVzZXQoKVwiPlxyXG5cclxuICAgIDxkaXYgKm5nRm9yPVwibGV0IHVuaXQgb2YgY29udGV4dHNcIlxyXG4gICAgICAgICBjbGFzcz1cImJyLXVuaXRcIlxyXG4gICAgICAgICAoY2xpY2spPVwidW5pdC5jbGljaygkZXZlbnQpXCJcclxuICAgICAgICAgKG1vdXNlZW50ZXIpPVwidW5pdC5lbnRlcigpXCI+XHJcblxyXG4gICAgICA8bmctY29udGFpbmVyIFtuZ1N3aXRjaF09XCJ1bml0LnN0YXRlXCI+XHJcbiAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1N3aXRjaENhc2U9XCJ1bml0U3RhdGUuZnJhY3Rpb25cIiBbbmdUZW1wbGF0ZU91dGxldF09XCJjdXN0b21GcmFjdGlvblJhdGluZz8udGVtcGxhdGUgfHwgZnJhY3Rpb25UZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1N3aXRjaENhc2U9XCJ1bml0U3RhdGUuaW5hY3RpdmVcIiBbbmdUZW1wbGF0ZU91dGxldF09XCJjdXN0b21JbkFjdGl2ZVJhdGluZz8udGVtcGxhdGUgfHwgaW5hY3RpdmVUZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1N3aXRjaERlZmF1bHQgW25nVGVtcGxhdGVPdXRsZXRdPVwiY3VzdG9tQWN0aXZlUmF0aW5nPy50ZW1wbGF0ZSB8fCBhY3RpdmVUZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XHJcbiAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcblxyXG4gIDxkaXYgKm5nSWY9XCJzaG93VGV4dFwiIGNsYXNzPVwiYnItdGV4dFwiPnt7IG5leHRSYXRlICsgMSB8IHJhdGVUaXRsZTogdGl0bGVzIH19PC9kaXY+XHJcbjwvZGl2PlxyXG5cclxuPG5nLXRlbXBsYXRlICNmcmFjdGlvblRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJici11bml0LWlubmVyIGJyLWZyYWN0aW9uXCI+PC9kaXY+XHJcbjwvbmctdGVtcGxhdGU+XHJcblxyXG48bmctdGVtcGxhdGUgI2FjdGl2ZVRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJici11bml0LWlubmVyIGJyLWFjdGl2ZVwiPjwvZGl2PlxyXG48L25nLXRlbXBsYXRlPlxyXG5cclxuPG5nLXRlbXBsYXRlICNpbmFjdGl2ZVRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJici11bml0LWlubmVyIGJyLWluYWN0aXZlXCI+PC9kaXY+XHJcbjwvbmctdGVtcGxhdGU+XHJcbiJdfQ==