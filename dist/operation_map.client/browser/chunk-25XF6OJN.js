import{a as ge,b as Ee,c as _e,d as ye}from"./chunk-BTAUWS6E.js";import{a as Ce,b as we}from"./chunk-ECSSIPO5.js";import{a as je,b as Se}from"./chunk-7QWU2ZD5.js";import{C as xe,D as be}from"./chunk-TQY73KEU.js";import{b as re,c as oe,e as J,f as ae,g as le,j as ce,k as de,l as me,m as se,n as pe,o as ue,p as ve,r as he,t as fe}from"./chunk-R4N7MW4K.js";import{b as I,c as b,d as P}from"./chunk-GR2IEN4H.js";import{$ as E,$b as y,Bb as N,Hb as ne,Ia as f,La as m,Ma as q,Rb as M,Sb as _,Ta as t,Tb as B,Ua as e,Va as s,Wa as K,Xa as Y,Xb as O,Za as k,a as X,ab as h,b as ee,cb as x,fa as g,ga as j,kb as Z,kc as $,lb as i,mb as te,mc as w,nb as p,nc as T,pb as ie,qc as L,ub as C,vb as A,wa as r,wb as V,xa as u,xb as F,zb as D}from"./chunk-NZE57U5H.js";var De=()=>["/project/create"],Ne=(a,c)=>({"bg-light-success":a,"bg-light-danger":c}),Ae=(a,c)=>({"badge-danger":a,"badge-success":c}),Me=(a,c)=>({"text-danger":a,"text-success":c}),Oe=a=>["/project/overview",a],Te=(a,c)=>({"bg-danger":a,"bg-success":c});function Le(a,c){if(a&1&&(t(0,"div",11)(1,"div",12)(2,"span",13),i(3),e(),t(4,"h5",14)(5,"a",15),i(6),e()(),t(7,"div",16)(8,"p"),i(9),e(),t(10,"p"),i(11),D(12,"date"),e()(),t(13,"div",17)(14,"div",18)(15,"p"),i(16),e(),t(17,"span"),i(18,"Done"),e()(),t(19,"div",19),s(20,"div",20),e()()()()),a&2){let d=c.$implicit;r(),m("ngClass",F(15,Ne,d.finished,!d.finished)),r(),m("ngClass",F(18,Ae,!d.finished,d.finished)),r(),p(" ",d.finished?"Done":"In Progress"," "),r(),m("ngClass",F(21,Me,!d.finished,d.finished)),r(),m("routerLink",V(24,Oe,d.id)),r(),p(" ",d.name," "),r(3),p("Location: ",d.city,""),r(2),p("Date: ",N(12,12,d.startDate,"shortDate"),""),r(5),p("",d.completionPercentage,"%"),r(4),q("width",d.completionPercentage+"%"),m("ngClass",F(26,Te,!d.finished,d.finished))}}var Ie=(()=>{let c=class c{constructor(n,l){this.projectService=n,this.router=l,this.projects=[],this.email=b.getEmail()}ngOnInit(){console.log("Fetching projects for email:",this.email),this.getAllProjects(this.email)}getAllProjects(n,l=1){this.projectService.getProjects(n,l).subscribe(o=>{this.projects=o},o=>{console.error("Error fetching projects:",o)})}};c.\u0275fac=function(l){return new(l||c)(u(P),u(w))},c.\u0275cmp=E({type:c,selectors:[["app-project-list"]],standalone:!0,features:[C],decls:13,vars:4,consts:[[1,"container-fluid"],[1,"row","project-cards"],[1,"col-md-12","project-list"],[1,"card"],[1,"card-body","text-end"],[1,"btn","btn-primary",3,"routerLink"],[3,"icon"],[1,"col-sm-12"],[1,"card-body"],[1,"row"],["class","col-xxl-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xxl-4","col-md-6"],[1,"project-box","font-dark",3,"ngClass"],[1,"badge",3,"ngClass"],[1,"mb-2",3,"ngClass"],[1,"fs-2","f-w-700",3,"routerLink"],[1,"row","details"],[1,"project-status","mt-4"],[1,"d-flex","align-items-center","gap-1","mb-2"],[1,"progress",2,"height","5px"],["role","progressbar",1,"progress-bar-animated","progress-bar-striped",3,"ngClass"]],template:function(l,o){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),s(6,"app-feather-icon",6),i(7," Create New Project "),e()()()(),t(8,"div",7)(9,"div",3)(10,"div",8)(11,"div",9),f(12,Le,21,29,"div",10),e()()()()()()),l&2&&(r(5),m("routerLink",A(3,De)),r(),m("icon","plus-square"),r(6),m("ngForOf",o.projects))},dependencies:[y,M,_,O,I,L,T]});let a=c;return a})();var Ve=()=>["/project/create"],Be=a=>["/project/overview/",a];function Re(a,c){if(a&1){let d=k();t(0,"div",10)(1,"div",11)(2,"h5",12)(3,"a",13),i(4),e()(),t(5,"div",14)(6,"p"),i(7),e(),t(8,"p"),i(9),e(),t(10,"p"),i(11),D(12,"date"),e()(),t(13,"div",1)(14,"div",2)(15,"div",15)(16,"button",16),h("click",function(){let l=g(d).$implicit,o=x();return j(o.updateProjectStatus(l.id,1))}),s(17,"app-feather-icon",6),i(18," Won Bid "),e(),t(19,"button",17),h("click",function(){let l=g(d).$implicit,o=x();return j(o.editProject(l.id))}),s(20,"app-feather-icon",6),i(21," Edit Project "),e()()()()()()}if(a&2){let d=c.$implicit,n=x();r(3),m("routerLink",V(10,Be,d.id)),r(),p(" ",d.name,"!!! "),r(3),p("Status: ",n.getProjectStatus(d.projectStatus),""),r(2),p("Location: ",d.city,""),r(2),p("Date: ",N(12,7,d.startDate,"shortDate"),""),r(6),m("icon","thumbs-up"),r(3),m("icon","edit")}}var Pe=(()=>{let c=class c{constructor(n,l){this.router=n,this.projectService=l,this.projects=[],this.email=b.getEmail()}ngOnInit(){this.getAllProjects(this.email)}getAllProjects(n,l=0){this.projectService.getProjects(n,l).subscribe(o=>{this.projects=o},o=>{console.error("Error fetching projects:",o)})}editProject(n,l="project-bids"){this.router.navigate(["/project/create",{id:n,redirect:l}])}addProject(){this.router.navigate(["/project/create",{status:1}])}goToProjectOverview(n){b.setProjectID(n),this.router.navigate(["/project/overview",n])}updateProjectStatus(n,l){n&&this.projectService.updateProjectStatus(this.email,n,l).subscribe(()=>{this.router.navigate(["/project/list"])})}getProjectStatus(n){switch(n){case 0:return"Bidding";case 1:return"In Progress";case-1:return"Archived";default:return"Unknown"}}};c.\u0275fac=function(l){return new(l||c)(u(w),u(P))},c.\u0275cmp=E({type:c,selectors:[["app-project-bids"]],standalone:!0,features:[C],decls:13,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","text-end"],[1,"btn","btn-primary",3,"routerLink"],[3,"icon"],[1,"col-sm-12"],[1,"card-body"],["class","col-xxl-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xxl-4","col-md-6"],[1,"project-box","font-dark"],[1,"mb-2"],[1,"fs-2","f-w-700",3,"routerLink"],[1,"row","details","mb-4"],[1,"text-end"],[1,"btn","btn-primary","me-3",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(l,o){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),s(6,"app-feather-icon",6),i(7," Create New Bid "),e()()()(),t(8,"div",7)(9,"div",3)(10,"div",8)(11,"div",1),f(12,Re,22,12,"div",9),e()()()()()()),l&2&&(r(5),m("routerLink",A(3,Ve)),r(),m("icon","plus-square"),r(6),m("ngForOf",o.projects))},dependencies:[y,_,O,I,L,T]});let a=c;return a})();var qe=()=>["/project/list"],$e=a=>({"mb-3":a});function Ge(a,c){a&1&&(t(0,"div",49),i(1," Project name is required. "),e())}function Ue(a,c){a&1&&(t(0,"div",49),i(1," Project Status is required. "),e())}function We(a,c){if(a&1){let d=k();t(0,"div",50)(1,"div",51)(2,"label",52)(3,"input",53),h("change",function(l){let o=g(d).$implicit,v=x();return j(v.onCheckboxChange(l,o))}),e(),s(4,"span",54),e()(),i(5),e()}if(a&2){let d=c.$implicit,n=c.index;m("ngClass",V(4,$e,n%2===0)),r(3),m("id","itemCheckbox"+n)("checked",d.selected),r(2),p(" ",d.name," ")}}var Q=(()=>{let c=class c{constructor(n,l,o,v,S){this.fb=n,this.apiService=l,this.route=o,this.router=v,this.cdr=S,this.email=b.getEmail(),this.defaultLineItems=[{name:"Clearing",selected:!0},{name:"Demolition",selected:!0},{name:"Excavation",selected:!0},{name:"Foundation",selected:!0},{name:"Drainage",selected:!0},{name:"Electrical Underground",selected:!0},{name:"Water Line Connection",selected:!0},{name:"Side Sewer Connection",selected:!0},{name:"Framing",selected:!0},{name:"Roofing",selected:!0},{name:"Windows",selected:!0},{name:"Decking",selected:!0},{name:"Garage Door",selected:!0},{name:"Gutters",selected:!0},{name:"Flashing",selected:!0},{name:"Waterproofing",selected:!0},{name:"Siding",selected:!0},{name:"Concrete Flat Work",selected:!0},{name:"Painting Outside",selected:!0},{name:"Painting Inside",selected:!0},{name:"Electrical",selected:!0},{name:"Plumbing",selected:!0},{name:"Heating / AC",selected:!0},{name:"Fire Sprinkler",selected:!0},{name:"Low voltage",selected:!0},{name:"Insulation",selected:!0},{name:"Drywall",selected:!0},{name:"Hardwood Flooring",selected:!0},{name:"Carpet",selected:!0},{name:"Tile",selected:!0},{name:"Outside Stone/tile",selected:!0},{name:"Kitchen Cabinet Install",selected:!0},{name:"Countertop Install",selected:!0},{name:"Hardware Install",selected:!0},{name:"Mirrors",selected:!0},{name:"Shower Glass Door",selected:!0},{name:"Closet Install",selected:!0},{name:"Millwork Doors and Trim",selected:!0},{name:"Grading",selected:!0},{name:"Landscaping",selected:!0},{name:"Fencing",selected:!0},{name:"Driveway Paving",selected:!0},{name:"Driveway Concrete",selected:!0},{name:"Cleaning",selected:!0},{name:"Tool / Equipment Rental",selected:!0},{name:"Day Labor Help",selected:!0}],this.newLineItem="",this.selectedItems=[],this.projectForm=this.fb.group({name:["",J.required],address1:[""],address2:[""],city:[""],state:[""],zipCode:[""],startDate:[new Date],started:[!1],finished:[!1],finishDate:[new Date],completionPercentage:[0],units:[0],projectEmail:[""],projectStatus:[0,J.required],bathrooms:[0],squareFootage:[0],bedrooms:[0]}),this.projectForm.get("projectStatus")?.valueChanges.subscribe(H=>{H!=null&&this.projectForm.patchValue({projectStatus:Number(H)},{emitEvent:!1})}),this.projectId=null}ngOnInit(){this.projectId=this.route.snapshot.paramMap.get("id"),this.redirect=this.route.snapshot.paramMap.get("redirect"),this.projectStatus=Number(this.route.snapshot.paramMap.get("status")),this.projectId&&this.apiService.getProjectById(this.email,this.projectId).subscribe(n=>{n?this.projectForm.patchValue(n):this.projectForm.patchValue({projectStatus:this.projectStatus})})}onSubmit(){if(this.projectForm.valid){let n=this.defaultLineItems.filter(o=>o.selected),l=ee(X({},this.projectForm.value),{lineItemOptions:n});this.projectId?this.apiService.updateProject(this.email,this.projectId,l).subscribe(()=>{this.redirect&&this.redirect=="/project/list"?this.router.navigate(["/project/bids"]):this.router.navigate(["/project/list"])}):this.apiService.createProject(this.email,l).subscribe(()=>{console.log("Creation Completed"),this.router.navigate(["/project/bids"])})}else this.alertInvalidForm(),console.log("Form is invalid")}onCheckboxChange(n,l){console.log("Target",n),l.selected=n.checked}selectAll(){this.defaultLineItems.forEach(n=>n.selected=!0)}clearAll(){this.defaultLineItems.forEach(n=>n.selected=!1)}alertInvalidForm(){let n=[],l=this.projectForm.controls;for(let o in l)l[o].invalid&&n.push(o);alert(`The following fields are required: ${n.join(", ")}`)}trackByFn(n,l){return l.id}};c.\u0275fac=function(l){return new(l||c)(u(he),u(P),u($),u(w),u(ne))},c.\u0275cmp=E({type:c,selectors:[["app-create-new"]],standalone:!0,features:[C],decls:250,vars:15,consts:[["startDateInput",""],[3,"ngSubmit","formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"form","theme-form","basic-form"],[1,"col-lg-10",2,"padding-right","80px"],[1,"col"],[1,"mb-3"],[1,"f-w-600","mb-2"],["type","text","placeholder","Project name *","id","name","formControlName","name",1,"form-control"],["class","error",4,"ngIf"],["type","text","placeholder","Enter address","id","address1","formControlName","address1",1,"form-control"],["type","text","placeholder","Enter Suite/Unit/Apt","id","address2","formControlName","address2",1,"form-control"],["type","text","placeholder","Enter city","id","city","formControlName","city",1,"form-control"],["id","state","formControlName","state",1,"form-select"],["type","text","placeholder","Enter zip code","id","zipCode","formControlName","zipCode",1,"form-control"],[1,"col-sm-8"],[1,"input-group","position-relative"],["type","date","placeholder","Enter project starting date","id","startDate","formControlName","startDate",1,"form-control"],["type","button",1,"btn","btn-primary","calendar",2,"position","absolute","right","10px","top","50%","transform","translateY(-50%)","pointer-events","none",3,"click"],[3,"icon"],[1,"col-sm-4"],[1,"form-check"],["id","finished","type","checkbox","formControlName","finished",1,"form-check-input","primary"],["for","finished",1,"form-check-label"],["type","date","placeholder","Enter project due date","id","finishDate","formControlName","finishDate",1,"form-control"],["id","started","type","checkbox","formControlName","started",1,"form-check-input","primary"],["for","started",1,"form-check-label"],["type","number","id","completionPercentage","formControlName","completionPercentage",1,"form-control"],["type","email","id","projectEmail","formControlName","projectEmail",1,"form-control"],["id","projectStatus","formControlName","projectStatus",1,"form-select"],[3,"value"],[1,"col-sm-2"],["type","number","id","units","formControlName","units",1,"form-control"],["type","number","id","bathrooms","formControlName","bathrooms",1,"form-control"],["type","number","id","bedrooms","formControlName","bedrooms",1,"form-control"],["type","number","id","squareFootage","formControlName","squareFootage",1,"form-control"],[1,"col-lg-2","mb-4"],[1,"mb-4"],[1,"f-w-600","mb-3"],["class","form-check-size mb-4",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-outline-primary","me-3",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"text-end"],["type","submit",1,"btn","btn-primary","me-3"],[1,"btn","btn-secondary",3,"routerLink"],[1,"error"],[1,"form-check-size","mb-4",3,"ngClass"],[1,"text-end","icon-state","switch-inline"],[1,"switch","mb-0"],["type","checkbox",3,"change","id","checked"],[1,"switch-state","bg-primary"]],template:function(l,o){if(l&1){let v=k();t(0,"form",1),h("ngSubmit",function(){return g(v),j(o.onSubmit())}),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",3)(8,"div",8)(9,"div",3)(10,"div",3)(11,"div",4)(12,"div",9)(13,"div",10)(14,"h5",11),i(15,"Project Title"),e(),s(16,"input",12),f(17,Ge,2,0,"div",13),e()()(),t(18,"div",3)(19,"div",9)(20,"div",10)(21,"h5",11),i(22,"Address"),e(),s(23,"input",14),e()()(),t(24,"div",3)(25,"div",9)(26,"div",10)(27,"h5",11),i(28,"Address 2"),e(),s(29,"input",15),e()()(),t(30,"div",3)(31,"div",9)(32,"div",10)(33,"h5",11),i(34,"City"),e(),s(35,"input",16),e()()(),t(36,"div",3)(37,"div",9)(38,"div",10)(39,"h5",11),i(40,"State"),e(),t(41,"select",17)(42,"option"),i(43,"Alabama"),e(),t(44,"option"),i(45,"Alaska"),e(),t(46,"option"),i(47,"Arizona"),e(),t(48,"option"),i(49,"Arkansas"),e(),t(50,"option"),i(51,"California"),e(),t(52,"option"),i(53,"Colorado"),e(),t(54,"option"),i(55,"Connecticut"),e(),t(56,"option"),i(57,"Delaware"),e(),t(58,"option"),i(59,"Florida"),e(),t(60,"option"),i(61,"Georgia"),e(),t(62,"option"),i(63,"Hawaii"),e(),t(64,"option"),i(65,"Idaho"),e(),t(66,"option"),i(67,"Illinois"),e(),t(68,"option"),i(69,"Indiana"),e(),t(70,"option"),i(71,"Iowa"),e(),t(72,"option"),i(73,"Kansas"),e(),t(74,"option"),i(75,"Kentucky"),e(),t(76,"option"),i(77,"Louisiana"),e(),t(78,"option"),i(79,"Maine"),e(),t(80,"option"),i(81,"Maryland"),e(),t(82,"option"),i(83,"Massachusetts"),e(),t(84,"option"),i(85,"Michigan"),e(),t(86,"option"),i(87,"Minnesota"),e(),t(88,"option"),i(89,"Mississippi"),e(),t(90,"option"),i(91,"Missouri"),e(),t(92,"option"),i(93,"Montana"),e(),t(94,"option"),i(95,"Nebraska"),e(),t(96,"option"),i(97,"Nevada"),e(),t(98,"option"),i(99,"New Hampshire"),e(),t(100,"option"),i(101,"New Jersey"),e(),t(102,"option"),i(103,"New Mexico"),e(),t(104,"option"),i(105,"New York"),e(),t(106,"option"),i(107,"North Carolina"),e(),t(108,"option"),i(109,"North Dakota"),e(),t(110,"option"),i(111,"Ohio"),e(),t(112,"option"),i(113,"Oklahoma"),e(),t(114,"option"),i(115,"Oregon"),e(),t(116,"option"),i(117,"Pennsylvania"),e(),t(118,"option"),i(119,"Rhode Island"),e(),t(120,"option"),i(121,"South Carolina"),e(),t(122,"option"),i(123,"South Dakota"),e(),t(124,"option"),i(125,"Tennessee"),e(),t(126,"option"),i(127,"Texas"),e(),t(128,"option"),i(129,"Utah"),e(),t(130,"option"),i(131,"Vermont"),e(),t(132,"option"),i(133,"Virginia"),e(),t(134,"option"),i(135,"Washington"),e(),t(136,"option"),i(137,"West Virginia"),e(),t(138,"option"),i(139,"Wisconsin"),e(),t(140,"option"),i(141,"Wyoming"),e()()()()(),t(142,"div",3)(143,"div",9)(144,"div",10)(145,"h5",11),i(146,"Zip Code"),e(),s(147,"input",18),e()()(),t(148,"div",3)(149,"div",19)(150,"div",10)(151,"h5",11),i(152,"Start Date"),e(),t(153,"div",20),s(154,"input",21,0),t(156,"button",22),h("click",function(){g(v);let R=Z(155);return j(R.focus())}),s(157,"app-feather-icon",23),e()()()(),t(158,"div",24)(159,"h5",11),i(160,"\xA0"),e(),t(161,"div",25),s(162,"input",26),t(163,"label",27),i(164,"Is started?"),e()()()(),t(165,"div",3)(166,"div",19)(167,"div",10)(168,"h5",11),i(169,"Due Date"),e(),t(170,"div",20),s(171,"input",28,0),t(173,"button",22),h("click",function(){g(v);let R=Z(155);return j(R.focus())}),s(174,"app-feather-icon",23),e()()()(),t(175,"div",24)(176,"h5",11),i(177,"\xA0"),e(),t(178,"div",25),s(179,"input",29),t(180,"label",30),i(181,"Is finished?"),e()()()(),t(182,"div",3)(183,"div",9)(184,"div",10)(185,"h5",11),i(186,"Completion %"),e(),s(187,"input",31),e()()(),t(188,"div",3)(189,"div",9)(190,"div",10)(191,"h5",11),i(192,"Project Email"),e(),s(193,"input",32),e()()(),t(194,"div",3)(195,"div",9)(196,"div",10)(197,"h5",11),i(198,"Project Status"),e(),t(199,"select",33)(200,"option",34),i(201,"Bidding"),e(),t(202,"option",34),i(203,"In Progress"),e(),t(204,"option",34),i(205,"Archived"),e()(),f(206,Ue,2,0,"div",13),e()()()()(),t(207,"div",3)(208,"div",4)(209,"div",3)(210,"div",35)(211,"div",10)(212,"h5",11),i(213,"Units #"),e(),s(214,"input",36),e()(),t(215,"div",35)(216,"div",10)(217,"h5",11),i(218,"Bathrooms"),e(),s(219,"input",37),e()(),t(220,"div",35)(221,"div",10)(222,"h5",11),i(223,"Bedrooms"),e(),s(224,"input",38),e()(),t(225,"div",35)(226,"div",10)(227,"h5",11),i(228,"Square Footage"),e(),s(229,"input",39),e()()()()()(),t(230,"div",40)(231,"div",3)(232,"div",41)(233,"h5",42),i(234,"Line items"),e(),f(235,We,6,6,"div",43),e(),t(236,"div")(237,"button",44),h("click",function(){return g(v),j(o.selectAll())}),i(238," Select All "),e(),t(239,"button",45),h("click",function(){return g(v),j(o.clearAll())}),i(240," Clear All "),e()()()()(),t(241,"div",3)(242,"div",9)(243,"div",46)(244,"button",47),s(245,"app-feather-icon",23),i(246),e(),t(247,"button",48),s(248,"app-feather-icon",23),i(249," Cancel "),e()()()()()()()()()()()}if(l&2){let v,S;m("formGroup",o.projectForm),r(17),m("ngIf",((v=o.projectForm.get("name"))==null?null:v.touched)&&((v=o.projectForm.get("name"))==null?null:v.invalid)),r(140),m("icon","calendar"),r(17),m("icon","calendar"),r(26),m("value",0),r(2),m("value",1),r(2),m("value",-1),r(2),m("ngIf",((S=o.projectForm.get("projectStatus"))==null?null:S.touched)&&((S=o.projectForm.get("projectStatus"))==null?null:S.invalid)),r(29),m("ngForOf",o.defaultLineItems)("ngForTrackBy",o.trackByFn),r(10),m("icon",(o.projectId,"edit")),r(),p(" ",o.projectId?"Update":"Create"," Project "),r(),m("routerLink",A(14,qe)),r(),m("icon","x")}},dependencies:[y,M,_,B,fe,ce,ue,ve,oe,de,re,pe,ae,le,me,se,ge,I,L,T]});let a=c;return a})();var ze=()=>["/project/create"],He=(a,c)=>({"badge-danger":a,"badge-success":c});function Ke(a,c){if(a&1&&(t(0,"h5"),i(1),e()),a&2){let d=c.$implicit;r(),p(" Project Owner: ",d.owner," ")}}function Ye(a,c){if(a&1&&(t(0,"span"),i(1),e()),a&2){let d=c.$implicit;r(),ie("",d.name," - ",d.number," - ",d.email,"")}}function Ze(a,c){if(a&1&&(t(0,"h5")(1,"span",12),i(2,"Contacts:"),e(),f(3,Ye,2,3,"span",19),e()),a&2){let d=c.$implicit;r(3),m("ngForOf",d.contacts)}}function Je(a,c){if(a&1){let d=k();t(0,"button",20),h("click",function(){g(d);let l=x();return j(l.onArchive())}),s(1,"app-feather-icon",6),i(2," Archive Project "),e()}a&2&&(r(),m("icon","archive"))}var ke=(()=>{let c=class c{constructor(n,l,o,v,S){this.route=n,this.apiService=l,this.router=o,this.dialog=v,this.snackBar=S,this.project={id:"",name:"",startDate:new Date,completionPercentage:0,units:0,projectStatus:0},this.dataSource=[],this.userEmail=b.getEmail(),this.projectId=this.route.snapshot.paramMap.get("projectId")}ngOnInit(){this.loadProjectData()}loadProjectData(){this.apiService.getProjectById(this.userEmail,this.projectId).subscribe(n=>{this.project=n,this.dataSource=[n]},n=>{this.snackBar.open("Error fetching project data.","Close",{duration:3e3}),console.error("Error fetching project data:",n)})}editProject(n="projects"){this.router.navigate(["/project/edit/project-form",{id:this.projectId,redirect:n}])}onArchive(){this.projectId&&this.apiService.updateProjectStatus(this.userEmail,this.projectId,-1).subscribe(()=>{this.router.navigate(["/project/archive"])})}openDialog(n){this.dialog.open(Ee,{width:"400px",data:{projectId:n,userEmail:this.userEmail}}).afterClosed().subscribe(o=>{window.location.reload()})}openAddMaterialDialog(){this.dialog.open(Ce,{width:"400px",data:{projectId:this.projectId,userEmail:this.userEmail}}).afterClosed().subscribe(l=>{window.location.reload()})}};c.\u0275fac=function(l){return new(l||c)(u($),u(P),u(w),u(xe),u(_e))},c.\u0275cmp=E({type:c,selectors:[["app-projects-overview"]],standalone:!0,features:[C],decls:95,vars:30,consts:[[1,"container-fluid"],[1,"row","project-cards"],[1,"col-md-12","project-overview"],[1,"card"],[1,"card-body","text-end"],[1,"btn","btn-primary","me-3",3,"click"],[3,"icon"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-body"],[1,"badge","mb-3",3,"ngClass"],[1,"mb-3"],[1,"fs-3","f-w-700","text-primary"],[1,"f-w-300","me-1"],[1,"col-md-6"],[4,"matCellDef"],[1,"col-md-12"],[1,"row","me-3"],[1,"text-end"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(l,o){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),h("click",function(){return o.openDialog(o.projectId)}),s(6,"app-feather-icon",6),i(7," Add Line Item "),e(),t(8,"button",5),h("click",function(){return o.openAddMaterialDialog()}),s(9,"app-feather-icon",6),i(10," Add New Material "),e(),t(11,"a",7),s(12,"app-feather-icon",6),i(13," Create New Project "),e()()()(),t(14,"div",2)(15,"div",3)(16,"div",8)(17,"span",9),i(18),e(),t(19,"h2",10)(20,"span",11),i(21),e()(),t(22,"h5")(23,"span",12),i(24,"Starting Date:"),e(),i(25),D(26,"date"),t(27,"span",12),i(28,"Ending Date:"),e(),i(29),D(30,"date"),e()()()()(),t(31,"div",1)(32,"div",13)(33,"div",3)(34,"div",8)(35,"h2",10),i(36,"Project Details"),e(),K(37),f(38,Ke,2,1,"h5",14),t(39,"h5")(40,"span",12),i(41,"Units:"),e(),i(42),e(),t(43,"h5")(44,"span",12),i(45,"Bedrooms:"),e(),i(46),e(),t(47,"h5")(48,"span",12),i(49,"Bathrooms:"),e(),i(50),e(),t(51,"h5")(52,"span",12),i(53,"Square Footage:"),e(),i(54),e(),f(55,Ze,4,1,"h5",14),Y(),e()()(),t(56,"div",13)(57,"div",3)(58,"div",8)(59,"h2",10),i(60,"Project Location"),e(),K(61),t(62,"h5")(63,"span",12),i(64,"Street:"),e(),i(65),e(),t(66,"h5")(67,"span",12),i(68,"Suite/Unit/Apt:"),e(),i(69),e(),t(70,"h5")(71,"span",12),i(72,"City:"),e(),i(73),e(),t(74,"h5")(75,"span",12),i(76,"State:"),e(),i(77),e(),t(78,"h5")(79,"span",12),i(80,"Zip Code:"),e(),i(81),e(),Y(),e()()()(),s(82,"app-line-items")(83,"app-material-list"),t(84,"div",1)(85,"div",15)(86,"div",3)(87,"div",8)(88,"div",16)(89,"div",15)(90,"div",17)(91,"button",5),h("click",function(){return o.editProject(o.project.id)}),s(92,"app-feather-icon",6),i(93," Edit Project "),e(),f(94,Je,3,1,"button",18),e()()()()()()()()),l&2&&(r(6),m("icon","plus-square"),r(3),m("icon","plus-square"),r(2),m("routerLink",A(26,ze)),r(),m("icon","plus-square"),r(5),m("ngClass",F(27,He,!o.project.finished,o.project.finished)),r(),p(" ",o.project.finished?"Done":"In Progress"," "),r(3),te(o.project.name),r(4),p(" ",N(26,20,o.project.startDate,"shortDate")," - "),r(4),p(" ",N(30,23,o.project.finishDate,"shortDate")," "),r(13),p(" ",o.project.units," "),r(4),p(" ",o.project.bedrooms," "),r(4),p(" ",o.project.bathrooms," "),r(4),p(" ",o.project.squareFootage," "),r(11),p(" ",o.project.address1," "),r(4),p(" ",o.project.address2," "),r(4),p(" ",o.project.city,""),r(4),p(" ",o.project.state," "),r(4),p(" ",o.project.zipCode," "),r(11),m("icon","edit"),r(2),m("ngIf",o.projectId))},dependencies:[y,M,_,B,O,Se,je,L,T,be,I,ye,we],styles:["table[_ngcontent-%COMP%]{width:100%}mat-header-cell[_ngcontent-%COMP%], mat-cell[_ngcontent-%COMP%]{padding:8px}"]});let a=c;return a})();var Qe=(a,c)=>({"bg-danger":a,"bg-success":c});function Xe(a,c){a&1&&(t(0,"div")(1,"p",7),i(2,"There are no archived items available."),e()())}function et(a,c){if(a&1){let d=k();t(0,"div",10)(1,"div",11)(2,"h5",12),i(3),e(),t(4,"div",13)(5,"p"),i(6),e(),t(7,"p"),i(8),e(),t(9,"p"),i(10),D(11,"date"),e()(),t(12,"div",14)(13,"div",15)(14,"p"),i(15),e(),t(16,"span"),i(17,"Done"),e()(),t(18,"div",16),s(19,"div",17),e()(),t(20,"div",18)(21,"button",19),h("click",function(){let l=g(d).$implicit,o=x(2);return j(o.reviveProject(l.id,1))}),s(22,"app-feather-icon",20),i(23," Reinstate Project "),e(),t(24,"button",21),h("click",function(){let l=g(d).$implicit,o=x(2);return j(o.deleteProject(l.id))}),s(25,"app-feather-icon",20),i(26," Delete Project "),e()()()()}if(a&2){let d=c.$implicit,n=x(2);r(3),p(" ",d.name," "),r(3),p(" Project Status: ",n.getProjectStatus(d.projectStatus)," "),r(2),p("City: ",d.city,""),r(2),p(" Starting Date: ",N(11,10,d.startDate,"shortDate")," "),r(5),p("",d.completionPercentage,"%"),r(4),q("width",d.completionPercentage+"%"),m("ngClass",F(13,Qe,!d.finished,d.finished)),r(3),m("icon","rotate-ccw"),r(3),m("icon","trash-2")}}function tt(a,c){if(a&1&&(t(0,"div",8),f(1,et,27,16,"div",9),e()),a&2){let d=x();r(),m("ngForOf",d.projects)}}var Fe=(()=>{let c=class c{constructor(n,l){this.projectService=n,this.router=l,this.projects=[],this.email=b.getEmail()}ngOnInit(){this.getAllProjects(this.email)}getAllProjects(n,l=-1){this.projectService.getProjects(n,l).subscribe(o=>{this.projects=o},o=>{console.error("Error fetching projects:",o)})}deleteProject(n){confirm("Are you sure you want to delete this project?")&&n&&this.projectService.deleteProject(this.email,n).subscribe(()=>{this.router.navigate(["/project/list"])})}reviveProject(n,l){n&&this.projectService.updateProjectStatus(this.email,n,l).subscribe(()=>{this.router.navigate(["/project/list"])})}getProjectStatus(n){switch(n){case 0:return"Bidding";case 1:return"In Progress";case-1:return"Archived";default:return"Unknown"}}};c.\u0275fac=function(l){return new(l||c)(u(P),u(w))},c.\u0275cmp=E({type:c,selectors:[["app-projects-archive"]],standalone:!0,features:[C],decls:7,vars:2,consts:[[1,"container-fluid"],[1,"row","project-cards"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center"],[1,"row"],["class","col-xxl-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xxl-4","col-md-6"],[1,"project-box","font-dark"],[1,"fs-3","f-w-700","text-primary","mb-2"],[1,"row","details"],[1,"project-status","mt-4","mb-4"],[1,"d-flex","align-items-center","gap-1","mb-2"],[1,"progress",2,"height","5px"],["role","progressbar",1,"progress-bar-animated","progress-bar-striped",3,"ngClass"],[1,"text-end","mb-2"],[1,"btn","btn-primary","me-3",3,"click"],[3,"icon"],[1,"btn","btn-secondary",3,"click"]],template:function(l,o){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f(5,Xe,3,0,"div",5)(6,tt,2,1,"div",6),e()()()()()),l&2&&(r(5),m("ngIf",o.projects.length===0),r(),m("ngIf",o.projects.length>0))},dependencies:[y,M,_,B,O,I]});let a=c;return a})();var Ut=[{path:"",children:[{path:"list",component:Ie,data:{title:"Project List",breadcrumb:"Project List"}},{path:"create",component:Q,data:{title:"Project Create",breadcrumb:"Project Create"}},{path:"edit/:projectId",component:Q,data:{title:"Edit Project",breadcrumb:"Edit Project"}},{path:"overview/:projectId",component:ke,data:{title:"Project Overview",breadcrumb:"Project Overview"}},{path:"archive",component:Fe,data:{title:"Project Archive",breadcrumb:"Project Archive"}},{path:"bids",component:Pe,data:{title:"Project Bids",breadcrumb:"Project Bids"}}]}];export{Ut as Project};
